---
layout:     post
title:      "TaiAn dataset"
subtitle:   "泰安数据集"
date:       2020-08-25
author:     "wumingyao"
header-img: "img/in-post/2020.08/25/bg.jpg"
tags: [数据集]
categories: [数据集]
---

## 主要内容
* [一、Introduction](#p1)
* [二、data_process](#p2)


## 正文

###  <span id="p1">一、Introduction</span>
#### tgs卡口数据
tgs数据集是对每个卡口的描述

|列名|类型|描述|
|----|----|----|
|卡口编号|varchar(12)|每个卡口的编号，长度为12，范围从370900000001~913300081800|
|卡口名称|varchar|卡口的官方名称，例：泰山大街与荣院东路路口|
|俗名|varchar|卡口的通俗名称|
|卡口类型|number|这份数据集里面只有一种(2)类型的卡口|
|单位代码|varchar(12)|归属单位的编码，长度为12，范围370900000000~370999000000|
|行政区划|varchar(6)|卡口归属行政区的编码，长度为6，范围370900~370911|
|经度|decimal(7,4)|卡口所在的经度，范围116.8804~117.4454，跨度约50公里|
|纬度|decimal(7,5)|卡口所在的维度，范围35.94622~36.330876，跨度42.77公里|
|方向|enumeration|{01,02,03,04,05},有一个卡口方向为05|
|车道数|int|0~7,卡口的车道数|

#### passcar_data流量数据
一共有12个csv文件，分别是2018年1~12个月的卡口流量数据。

|列名|类型|描述|
|----|----|----|
|plate_number|varchar|出租车车牌编号，（去除隐私之后的）|
|plate_type|number|车牌类型{1,2,3,6,8,16,23,31,32,51,52,99}|
|tgs|varchar(12)|出租车经过的卡口编号|
|pass_time|unix时间戳(s)|出租车经过卡口的时间|
|travel_orientation|number|车辆方向{01东向西,02西向南,03南向北,04北向南}|

#### sourcedata事故数据
一共有4个csv文件，分别记录泰安市2016~2019年的交通事故信息。

|列名|类型|描述|
|----|----|----|
|事故编号|varchar(16/18)|总共有28813条编号，2016：10974，2017：7487，2018：6322，2019：4030，都以37开头，且位数有16位或者18位|
|行政区划|varchar(6)|该条交通事故归属行政区的编码，长度为6，范围370900~370911|
|事故发生时间|date|时间格式为 2018-06-28 08:10:00.0|
|星期|varchar|格式：星期一|
|月份|varchar|格式：6月|
|年份|varchar(4)|格式：2018|
|路号|varchar(5)|格式：71117|
|路名|varchar|事故所在地路名，格式：青年路|
|公里数|int|代表啥？|
|米数|int|代表啥？|
|事故地点|varchar|事故具体地点，举例：青年路恒基理想家小区门前|
|在道路横断面位置|enumeration|{非机动车道，机动车道，机非混合道，其他，人行道，人行横道}|
|事故形态|enumeration|{乘员跌落或抛出，侧翻，其他单车事故，其他车辆与行人事故，其他车辆间事故，刮撞行人，坠车，失火，撞固定物，撞非固定物，滚翻，碰撞后碾压行人，碰撞运动车辆，碰撞静止车辆，碾压行人，自身摺叠}|
|天气|varchar|总共有6种天气，集合为{晴，霾，雾，雪，阴，雨}|
|能见度|varchar|总共是4个范围，{50米以下，50-100米，200米以上，100-200米}|
|路面状况|varchar|总共5种状况，{路面完好，凹凸，施工，塌陷，其他}|
|路表情况|varchar|总共5种情况，{干燥，冰雪，潮湿，积水，其他}|
|道路类型|varchar|总共10种类型，{一级，一般城市道路，三级，二级，公共停车场，其他路，单位小区自建路，四级，城市快速路，等外，高速}|
|公路行政等级|varchar|总共有5种等级，{国道，省道，县道，乡道，其他}|
|地形|varchar|3种地形，{平原，丘陵，山区}|
|道路线型|varchar|8种线型，{平直，陡坡，急弯，连续下坡，一般坡，一般弯，一般弯陡坡，一般弯坡}|
|道路物理隔离|varchar|4种隔离方式,{无隔离，中心隔离，机非隔离，中心隔离加机非隔离}|
|路面结构|varchar|5种结构，{沥青，沙石，水泥，土路，其他}|
|道路安全属性|varchar|5种属性，{正常路段，尚未排查隐患路段，已经治理但仍存在隐患路段，已排查尚未治理隐患路段，正在治理隐患路段}|
|交通方式|varchar|40种交通方式，例如：驾驶轻便摩托车、电动自行车、驾驶轻型货车等等|
|交通方式分类|varchar|7种类别，{驾（驭）非机动车，驾摩托车，驾驶汽车，驾农用运输车，驾驶其他机动车，驾拖拉机，其他}|
|车辆使用性质|varchar|18种性质，例如：私用，货运，救护等等，存在部分空白数据|
|车辆类型|varchar|48种类型，例如：轻型普通货车、小型轿车、小型面包车|

###  <span id="p2">二、data_process</span>
#### 卡口站点可视化
一共有378个卡口，通过地图标记可视化如下
![Figure 1](../../../../../../img/in-post/2020.08/25/Figure 1.jpg)

#### 路网可视化
如果一辆车上一时刻在A卡口，下一时刻在B卡口，那么我们认为A和B是相邻的。

我们通过将A和B用直线相连通进行可视化，如下图：
![Figure 2](../../../../../../img/in-post/2020.08/25/Figure 2.jpg)

我们原本是想将A和B的实际路劲抓出来，进行路网的可视化的，但目前有困难：

1) 我们通过验证卡口数据集，发现每个卡口的坐标是由误差的（例如，名为”xx省道和xx县道的交叉路口“的卡口，但数据集里面的卡口坐标和该交叉路口的实际坐标有所偏差），
这样抓出来的实际路径可能不太准确。

2) 两个卡口之间有多条路径，我们该选择哪一条呢？

#### 流量统计

##### 栅格化（路径）流量统计
我们想统计每个栅格的进/出流量，但目前有困难：
![Figure 3](../../../../../../img/in-post/2020.08/25/Figure 3.jpg)
1) 这份数据集粒度比较粗，它只记录了每辆车到卡口的时间，并没有每辆车的比较细粒度的GPS轨迹，
所以我们只能知道每个卡口的通过流量，并不能知道每两个卡口之间实际路径所在栅格的流量，因此想统计每个栅格的进/出流量是比较困难。

举个例子，一辆车从A到B的轨迹如下：
$$\tau=(t_1,g_1),(t_1,g_2),(t_1,g_2),(t_2,g_3),(t_3,g_3),\cdots,(t_k,g_8) ,|t_{j+1}-t_j|=\Delta t$$

其中，$t_i$表示第$i$个时间片，$g_i$表示第$i$个栅格。

基于这份数据，我们只能得到$(t_1,g_1)和(t_k,g_8)$
##### 节点流量统计
通过统计每个时间片每个卡口的通过流量，可以得到节点流量统计
shape(timesteps,numbers_node,1)
如果slice=5min，则timesteps=28*24*12=8064
numbers_node=378是卡口的个数

##### 边流量统计
通过统计每个时间片一个卡口流入另一个卡口的流量，可以得到边流量统计
shpae(timesteps,numbers_node,numbers_node)

edge[10][1][2]=5,表示第10个时间片，2号卡口接收到了从1卡口来的5个车流量。

##### 将有向边看成点统计边流量

